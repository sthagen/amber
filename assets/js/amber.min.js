var Amber=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.r(e),n.d(e,"Channel",(function(){return l})),n.d(e,"Socket",(function(){return f}));var r="join",a="leave",s="message",u=function(){return(new Date).getTime()},l=function(){function t(e,n){o(this,t),this.topic=e,this.socket=n,this.onMessageHandlers=[]}return c(t,[{key:"join",value:function(){this.socket.ws.send(JSON.stringify({event:r,topic:this.topic}))}},{key:"leave",value:function(){this.socket.ws.send(JSON.stringify({event:a,topic:this.topic}))}},{key:"handleMessage",value:function(t){this.onMessageHandlers.forEach((function(e){e.subject===t.subject&&e.callback(t.payload)}))}},{key:"on",value:function(t,e){this.onMessageHandlers.push({subject:t,callback:e})}},{key:"push",value:function(t,e){this.socket.ws.send(JSON.stringify({event:s,topic:this.topic,subject:t,payload:e}))}}]),t}(),f=function(){function t(e){o(this,t),this.endpoint=e,this.ws=null,this.channels=[],this.lastPing=u(),this.reconnectTries=0,this.attemptReconnect=!0}return c(t,[{key:"_connectionIsStale",value:function(){return t=this.lastPing,(u()-t)/1e3>100;var t}},{key:"_reconnect",value:function(){var t=this;clearTimeout(this.reconnectTimeout),this.reconnectTimeout=setTimeout((function(){t.reconnectTries++,t.connect(t.params),t._reconnect()}),this._reconnectInterval())}},{key:"_reconnectInterval",value:function(){return[1e3,2e3,5e3,1e4][this.reconnectTries]||1e4}},{key:"_poll",value:function(){var t=this;this.pollingTimeout=setTimeout((function(){t._connectionIsStale()?t._reconnect():t._poll()}),1e4)}},{key:"_startPolling",value:function(){clearTimeout(this.pollingTimeout),this._poll()}},{key:"_handlePing",value:function(){this.lastPing=u()}},{key:"_reset",value:function(){clearTimeout(this.reconnectTimeout),this.reconnectTries=0,this.attemptReconnect=!0,this._startPolling()}},{key:"connect",value:function(t){var e=this;this.params=t;var n={location:window.location.hostname,port:window.location.port,protocol:"https:"===window.location.protocol?"wss:":"ws:"};return t&&Object.assign(n,t),n.port&&(n.location+=":".concat(n.port)),new Promise((function(t,o){e.ws=new WebSocket("".concat(n.protocol,"//").concat(n.location).concat(e.endpoint)),e.ws.onmessage=function(t){e.handleMessage(t)},e.ws.onclose=function(){e.attemptReconnect&&e._reconnect()},e.ws.onopen=function(){e._reset(),t()}}))}},{key:"disconnect",value:function(){this.attemptReconnect=!1,clearTimeout(this.pollingTimeout),clearTimeout(this.reconnectTimeout),this.ws.close()}},{key:"channel",value:function(t){var e=new l(t,this);return this.channels.push(e),e}},{key:"handleMessage",value:function(t){if("ping"===t.data)return this._handlePing();var e=JSON.parse(t.data);this.channels.forEach((function(t){t.topic===e.topic&&t.handleMessage(e)}))}}]),t}();e.default={Channel:l,Socket:f},document.addEventListener("DOMContentLoaded",(function(){for(var t=document.querySelectorAll("a[data-method='delete']"),e=function(e){t[e].addEventListener("click",(function(n){n.preventDefault();var o=t[e].getAttribute("data-confirm")||"Are you sure?";if(confirm(o)){var i=document.createElement("form"),c=document.createElement("input");i.setAttribute("action",t[e].getAttribute("href")),i.setAttribute("method","POST"),c.setAttribute("type","hidden"),c.setAttribute("name","_method"),c.setAttribute("value","DELETE"),i.appendChild(c),document.body.appendChild(i),i.submit()}return!1}))},n=0;n<t.length;n++)e(n)})),Date.prototype.toGranite||function(){function t(t){return t<10?"0"+t:t}Date.prototype.toGranite=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+" "+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())}}()}]);